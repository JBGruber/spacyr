<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wrapper to the spaCy NLP Library • spacyr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><!-- docsearch --><script src="docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Wrapper to the spaCy NLP Library">
<meta property="og:description" content="An R wrapper to the Python spaCy NLP library,
    from &lt;https://spacy.io&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">spacyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Installation</a>
</li>
<li>
  <a href="articles/using_spacyr.html">Using spacyr</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quanteda/spacyr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="spacyr-an-r-wrapper-for-spacy">spacyr: an R wrapper for spaCy<a class="anchor" aria-label="anchor" href="#spacyr-an-r-wrapper-for-spacy"></a>
</h1></div>
<p><a href="https://CRAN.R-project.org/package=spacyr" class="external-link"><img src="https://www.r-pkg.org/badges/version/spacyr" alt="CRAN Version"></a> <a href="https://github.com/quanteda/spacyr/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/quanteda/spacyr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a> <a href="https://app.codecov.io/gh/quanteda/spacyr?branch=master" class="external-link"><img src="https://codecov.io/gh/quanteda/spacyr/branch/master/graph/badge.svg" alt="Codecov test coverage"></a> <a href="https://CRAN.R-project.org/package=spacyr" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/spacyr" alt="Downloads"></a> <a href="https://CRAN.R-project.org/package=spacyr" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/spacyr?color=orange" alt="Total Downloads"></a></p>
<p>An R wrapper to the spaCy “industrial strength natural language processing” Python library from <a href="https://spacy.io" class="external-link uri">https://spacy.io</a>.</p>
<div class="section level2">
<h2 id="installing-the-package">Installing the package<a class="anchor" aria-label="anchor" href="#installing-the-package"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<p>Install the <strong>spacyr</strong> R package:</p>
<ul>
<li>From CRAN:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"spacyr"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<p>From GitHub:</p>
<p>To install the latest package from source, you can simply run the following.</p>
</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"quanteda/spacyr"</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Install spaCy and requirements</p>
<p>Simply run:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://spacyr.quanteda.io" class="external-link">spacyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/spacy_install.html">spacy_install</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If you want to install a specific version, simply add it to the install command:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://spacyr.quanteda.io" class="external-link">spacyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/spacy_install.html">spacy_install</a></span><span class="op">(</span>version <span class="op">=</span> <span class="st">"apple"</span><span class="op">)</span></span></code></pre></div>
<p>Check the helpful version tool on <a href="https://spacy.io/usage" class="external-link uri">https://spacy.io/usage</a> and to see what is available.</p>
</li>
<li>
<p>(optional) Add more language models</p>
<p>If left unchanged, <code><a href="reference/spacy_install.html">spacy_install()</a></code> adds the default “en_core_web_sm” model. You can add more language models with <code><a href="reference/spacy_download_langmodel.html">spacy_download_langmodel()</a></code>. For instance, to install a small and efficient German language model:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/spacy_download_langmodel.html">spacy_download_langmodel</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Check out available models at <a href="https://spacy.io/usage/models" class="external-link uri">https://spacy.io/usage/models</a>.</p>
</li>
</ol>
<p>If you run into any problems, you can try the manual installation path described below.</p>
<div class="section level3">
<h3 id="manual-installation-and-troubleshooting">Manual installation and troubleshooting<a class="anchor" aria-label="anchor" href="#manual-installation-and-troubleshooting"></a>
</h3>
<p><code><a href="reference/spacy_install.html">spacy_install()</a></code> performs a number of tasks to set up a virtual environment in which spaCy is installed. Virtual environments are the recommended way to install Python applications, as the lack of central dependency conflict control (which is performed by CRAN in the <code>R</code>-world) means that conflicts between packages are a lot more common. Hence each Python package and its dependencies are usually installed in their own folder.</p>
<p>Usually, none of this should concern you. However, experience shows that some systems run into problems during installation that are hard to foresee by developers. Below, we therefore explain how you can perform the steps in <code><a href="reference/spacy_install.html">spacy_install()</a></code> manually, to debug any problems that might occur. Please only file a GitHub issue after you have tried to manually run through the steps, so we can provide you with more targeted help.</p>
<ol style="list-style-type: decimal">
<li>
<p>Install Python</p>
<p>You can use your own installation of Python for the steps below. By default, <code><a href="reference/spacy_install.html">spacy_install()</a></code> downloads and installs a minimal Python version in the default directory used by the <code>reticulate</code> package for simplicity. This can be done with a single command:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">python_exe</span> <span class="op">&lt;-</span> <span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/install_python.html" class="external-link">install_python</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The function returns the path to the Python executable file. You can run this again at any time to get that path (the installation is skipped if the files are already present). If you prefer to use a specific version of Python, you can use this function to install it and it will be picked up by <code>spacyr</code>.</p>
</li>
<li>
<p>Set up a virtual environment</p>
<p>By default, <code>spacyr</code> uses an environment called “r-spacyr”, which is located in a directory managed by <code>reticulate</code>. We can create it with:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/virtualenv-tools.html" class="external-link">virtualenv_create</a></span><span class="op">(</span><span class="st">"r-spacyr"</span>, python <span class="op">=</span> <span class="va">python_exe</span><span class="op">)</span></span></code></pre></div>
<p>If this causes trouble for some reason, you can install the environment in any location that is convenient for you like so:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/virtualenv-tools.html" class="external-link">virtualenv_create</a></span><span class="op">(</span><span class="st">"path/to/directory"</span>, python <span class="op">=</span> <span class="va">python_exe</span><span class="op">)</span></span></code></pre></div>
<p>Note, that <code>spacyr</code> does not know of the existence of this environment unless you tell it through the environment variable <code>SPACY_PYTHON</code>. You can do that either in each session with:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>SPACY_PYTHON <span class="op">=</span> <span class="st">"path/to/directory"</span><span class="op">)</span></span></code></pre></div>
<p>or you put it into your <code>.Renviron</code> file. You can use this little helper function to make the change permanent:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/edit.html" class="external-link">edit_r_environ</a></span><span class="op">(</span>scope <span class="op">=</span> <span class="st">"user"</span><span class="op">)</span></span></code></pre></div>
<p>We also need to tell <code>reticulate</code> that it should use this environment from now on.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/use_python.html" class="external-link">use_virtualenv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SPACY_PYTHON"</span>, unset <span class="op">=</span> <span class="st">"r-spacyr"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We use <code>Sys.getenv("SPACY_PYTHON", unset = "r-spacyr")</code> to check if <code>SPACY_PYTHON</code> is set and use the default otherwise.</p>
</li>
<li>
<p>Install spaCy</p>
<p>Installing <code>spaCy</code> and its dependencies is again done through <code>reticulate</code>. We check again if SPACY_PYTHON is set, in case you chose a non-default folder.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_install.html" class="external-link">py_install</a></span><span class="op">(</span><span class="st">"spacy"</span>, envname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SPACY_PYTHON"</span>, unset <span class="op">=</span> <span class="st">"r-spacyr"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Install spaCy language models</p>
<p>The language models are installed in the same way.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_install.html" class="external-link">py_install</a></span><span class="op">(</span><span class="st">"en_core_web_sm"</span>, envname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"SPACY_PYTHON"</span>, unset <span class="op">=</span> <span class="st">"r-spacyr"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</li>
</ol>
<p>If any of those steps fail, please file an <a href="https://github.com/quanteda/spacyr/issues" class="external-link">issue</a> (after checking if one already exists for your error). You can also use the individual commands to customise your setup.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=spacyr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/quanteda/spacyr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/quanteda/spacyr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing spacyr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Kenneth Benoit <br><small class="roles"> Maintainer, author, copyright holder </small> <a href="https://orcid.org/0000-0002-0797-564X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Akitaka Matsuo <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-3323-6330" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>European Research Council <br><small class="roles"> Funder </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Kenneth Benoit, Akitaka Matsuo, European Research Council.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '6db886781d6c5d5b8b62b7b72b1d1b7c',
    indexName: 'spacyr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
